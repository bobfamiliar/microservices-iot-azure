    {  
       "location":"East US",
       "properties":{  
          "sku":{  
             "name":"standard"
          },
          "outputStartTime":"2015-10-18 21:21:14Z",
          "outputStartMode":"CustomTime",
          "eventsOutOfOrderPolicy":"drop",
          "eventsOutOfOrderMaxDelayInSeconds":10,
          "inputs":[  
             {  
                "name":"input",
                "properties":{  
                   "type":"stream",
                   "serialization":{  
                      "type":"JSON",
                      "properties":{  
                         "encoding":"UTF8"
                      }
                   },
                   "datasource":{  
                      "type":"Microsoft.ServiceBus/EventHub",
                      "properties":{  
                         "serviceBusNamespace":"looksfamiliarsbdev",
                         "sharedAccessPolicyName":"RootManageSharedAccessKey",
                         "sharedAccessPolicyKey":"p1kJPB7wdzhfLHnQmP7NHiY9chjRlVlB5b0fr7R5lOk=",
                         "eventHubName":"biometrics"
                      }
                   }
                }
             }
          ],
          "transformation":{  
             "name":"bloodoxygen-alarms",
             "properties":{  
                "streamingUnits":1,
                "query":
"WITH Device as (SELECT * from input)
SELECT
    Device.deviceid,
    Device.participantid,
    Device.location.longitude,
    Device.location.latitude,
    Device.reading,
    DeviceSensors.ArrayValue.type,
    DeviceSensors.ArrayValue.value
INTO
    output
FROM
    Device
CROSS APPLY GetElements(Device.sensors) AS DeviceSensors
WHERE
     ((DeviceSensors.ArrayValue.type = 3) AND (DeviceSensors.ArrayValue.value < 85))"
             }
          },
        "outputs": [
          {
            "name": "output",
            "properties": {
              "type": "stream",
              "serialization": {
                "type": "JSON",
                "properties": {
                  "encoding": "UTF8"
                }
              },
              "datasource": {
                "type": "Microsoft.ServiceBus/EventHub",
                "properties": {
                    "serviceBusNamespace":"looksfamiliarsbdev",
                    "sharedAccessPolicyName":"RootManageSharedAccessKey",
                    "sharedAccessPolicyKey":"p1kJPB7wdzhfLHnQmP7NHiY9chjRlVlB5b0fr7R5lOk=",
                    "eventHubName":"alarms"
                }
              }
            }
          }
        ]
      }
  }
